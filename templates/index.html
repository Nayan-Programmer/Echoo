<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ assistant_name }} - AI Assistant</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Your full UI CSS copied here (same as previous CSS you gave me) */
</style>
</head>
<body>
<div class="app">
  <div class="background-gradient"></div>
  <div class="background-overlay"></div>

  <header class="header">
    <div class="header-content">
      <div class="logo-section">
        <div class="logo-icon">
          <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo-img">
        </div>
        <div class="logo-text">
          <h1>{{ assistant_name }}</h1>
          <p>Premium Chatbot</p>
        </div>
      </div>
      <div class="header-actions">
        <button class="header-btn">Settings</button>
      </div>
    </div>
  </header>

  <main class="main-content">
    {% if user %}
      <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
          <h2>Welcome, {{ user["name"] }}</h2>
          <a href="{{ url_for('logout') }}" class="start-chat-btn">Logout</a>
        </div>
      </div>
    {% else %}
      <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
          <div class="welcome-logo">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="welcome-logo-img">
          </div>
          <h2 class="welcome-title">Welcome to {{ assistant_name }}</h2>
          <p class="welcome-description">Your AI assistant for everything. Login with Google to start chatting!</p>
          <a href="{{ url_for('google.login') }}" class="start-chat-btn">Login with Google</a>
        </div>
      </div>
    {% endif %}

    <div class="chat-area" id="chatArea" style="display:none;">
      <div class="messages-container" id="messagesContainer"></div>
      <div class="message-input-container">
        <div class="message-input-wrapper">
          <div class="input-area">
            <textarea id="messageInput" placeholder="Type your message..."></textarea>
            <button class="send-btn" onclick="sendMessage()">Send</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-left">
        <span>&copy; 2025 {{ assistant_name }}</span>
        <div class="separator"></div>
        <a href="#" class="footer-link">Privacy</a>
      </div>
      <div class="footer-right">
        <div class="status-indicator"></div>
        <span class="status-text">Online</span>
      </div>
    </div>
  </footer>
</div>

<script>
function startChat(){
    document.getElementById('welcomeScreen').style.display='none';
    document.getElementById('chatArea').style.display='flex';
}

async function sendMessage(){
    const input = document.getElementById('messageInput');
    const text = input.value.trim();
    if(!text) return;

    const container = document.getElementById('messagesContainer');

    const userMessage = document.createElement('div');
    userMessage.className='message user';
    userMessage.innerHTML = `
        <div class="message-content">
            <div class="message-avatar user-avatar">U</div>
            <div class="message-bubble user"><div class="message-text">${text}</div></div>
        </div>`;
    container.appendChild(userMessage);
    input.value='';
    container.scrollTop=container.scrollHeight;

    try{
        const response = await fetch("/chat", {
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({message:text})
        });
        const data = await response.json();
        const aiText = data.reply;

        const aiMessage = document.createElement('div');
        aiMessage.className='message ai';
        aiMessage.innerHTML = `
        <div class="message-content">
            <div class="message-avatar ai-avatar">AI</div>
            <div class="message-bubble ai"><div class="message-text">${aiText}</div></div>
        </div>`;
        container.appendChild(aiMessage);
        container.scrollTop=container.scrollHeight;
    }catch(err){
        console.error(err);
    }
}
</script>
</body>
</html>
